<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- links to external files -->
  <!-- css-reset -->
  <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
  <!-- css-bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  <!-- css-custom -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <!-- fonts -->
  <link href="https://fonts.googleapis.com/css?family=Baloo+Tamma|Bubblegum+Sans" rel="stylesheet">
  <title>2-Hangman</title>
</head>

<body>

  <!-- section for game play -->
  <div class="playSpace">

    <!-- masthead -->
    <div class="title">
      <h1>Hangman</h1>
      <h2>Animal Style</h2>
    </div>

    <!-- image -->
    <img id="game-image" class="image" src="assets/images/hangman_lg.png" alt="image">
    <div id="pause" class="hiddenTxt"> </div>


    <!-- game content -->
    <p>Press any key to play!</p>
    <p>Current word:</p>
    <div id="current-word"> </div>
    <p>Guesses remaining: </p>
    <div id="remaining-guesses" class="letterDiv"> </div>
    <p>Already guessed:</p>
    <div id="wrong-letters"> </div>
    <p>Wins: </p>
  </div>
  </div>

  <audio id="bear">
    <source src= "assets/audio/bear.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="monkey">
  <source src= "assets/audio/monkey.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="snake">
    <source src= "assets/audio/snake.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="tiger">
    <source src= "assets/audio/tiger.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <audio id="zebra">
    <source src= "assets/audio/zebra.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script type="text/javascript">
  // variables
    var words = ["bear", "monkey", "snake", "tiger", "zebra"]
    var bear = {
      char: 4,
      charArr: ["b", "e", "a", "r"],
      image: "assets/images/bear.jpg",
      audio: "assets/audio/bear.mp3"
    }
    var monkey = {
      char: 6,
      charArr: ["m", "o", "n", "k", "e", "y"],
      image: "assets/images/monkey.jpg",
      audio: "assets/audio/monkey.mp3"
    }
    var snake = {
      char: 5,
      charArr: ["s", "n", "a", "k", "e"],
      image: "assets/images/snake.jpg",
      audio: "assets/audio/snake.mp3"
    }
    var tiger = {
      char: 5,
      charArr: ["t", "i", "g", "e", "r"],
      image: "assets/images/tiger.jpg",
      audio: "assets/audio/tiger.mp3"
    }
    var zebra = {
      char: 5,
      charArr: ["z", "e", "b", "r", "a"],
      image: "assets/images/zebra.jpg",
      audio: "assets/audio/zebra.mp3"
    }
    var wordDiv = document.getElementById("current-word");
    var guessRemain = document.getElementById("remaining-guesses");
    var random = Math.floor(Math.random() * 5);
    var currentWord = words[random];
    var audio = document.getElementById(currentWord);
    var correctGuess = [];
    var incorrectGuess = [];
    var totalGuesses = [];
    var guessesRemaining = [];
    console.log(words[random]);
    console.log(currentWord);
    console.log("word length-"+currentWord.length);

    // initial word generation
    function initialWord() {
      for (var i = 0; i < currentWord.length; i++) {
        var correctLetterDiv = document.createElement("div");
        correctLetterDiv.innerHTML = "_";
        wordDiv.appendChild(correctLetterDiv);
        correctLetterDiv.setAttribute("class", "letterDiv");
        correctLetterDiv.setAttribute("id", currentWord + "Letter" + i);
      }
      // display initial guesses remaining
      var initialGuesses = currentWord.length+6
      guessRemain.innerHTML = initialGuesses;
      guessesRemaining.push(initialGuesses);
      console.log("guessesRemaining-"+guessesRemaining);
    }
    initialWord()

  // play game
  // capture user guess
    document.onkeyup = function(event) {
    var userInput = String.fromCharCode(event.keyCode);
    var input = userInput.toLowerCase();
    console.log(input);
  // verify that the keystroke is a letter
    if (/[a-z]/.test(input)) {
  // verify that the letter has not been previously guessed
    if (correctGuess.indexOf(input) && incorrectGuess.indexOf(input) == -1){
  // if user guess is correct
    if (currentWord.indexOf(input) > -1) {
      var correctLetter = document.getElementById(currentWord+"Letter"+currentWord.indexOf(input));
      correctLetter.innerHTML = input;
      correctGuess.push(input);
      console.log("correctGuess-"+correctGuess);
    }
  // if user guess is incorrect
    else {
      var incorrectLetter = document.getElementById("wrong-letters")
      var incorrectLetterDiv = document.createElement("div");
      incorrectLetterDiv.innerHTML = input+",";
      incorrectLetterDiv.setAttribute("class", "letterDiv");
      incorrectLetter.appendChild(incorrectLetterDiv);
      incorrectGuess.push(input);
      console.log("incorrectGuess-"+incorrectGuess);
    }
  // track number of guesses
    function guessCount() {
      var totGuesses = correctGuess.length + incorrectGuess.length
      totalGuesses = totGuesses;
      console.log("totGuesses-"+totGuesses);
    }
    guessCount()
  // decrement Guesses remaining display
    function remainingGuesses() {
      console.log("input:remainingGuesses-"+input);
        var guessesLeft = guessesRemaining - totalGuesses
        console.log("guessesRemaining-"+guessesRemaining);
        console.log("totalGuesses-"+totalGuesses);
        console.log("guessesLeft-"+guessesLeft);
        guessRemain.innerHTML = guessesLeft
    }
    remainingGuesses()
  // determine if user won
    function playAudio() {
      // play audio for current word
      audio.play();
      // add pause button for audio
      var pause = document.getElementById("pause");
      var pauseBtn = document.createElement("button");
      pauseBtn.setAttribute("onclick", "pauseAudio()");
      pauseBtn.setAttribute("type", "button");
      pauseBtn.setAttribute("class", "pauseBtn");
      pauseBtn.innerHTML="Pause";  
      pause.appendChild(pauseBtn);
    }

    function determineWin() {
      if ((correctGuess.length == currentWord.length) && guessesRemaining > -1) {
        var replaceImage = document.getElementById("game-image");
        var newImage = "assets/images/"+currentWord+".jpg";
        console.log("newImage-"+newImage);
        replaceImage.setAttribute("src",newImage);
        playAudio();
      }
    }
    determineWin()


    }
  }
}

function pauseAudio() {
  audio.pause();
}



  </script>

</body>

</html>
